<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MUKESH ALGO</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    <style>
               /* ===== GLOBAL ===== */
               :root {
                  --top-offset: 140px;
                    --sidebar-width: 220px;
                    --primary-color: #007bff;
                    --secondary-color: #0056b3;
                    --success-color: #00ff00;
                    --danger-color: #ff0000;
                    --warning-color: #ff9900;
                    --info-color: #00ccff;
                    --purple-color: #9d4edd;
                    --dark-bg: #0d0d0d;
                    --panel-bg: #141414;
                    --border-color: #222;
                    --accent-color: #00ccff;
                }

                *{
                  box-sizing: border-box;
                  margin: 0;
                  padding: 0;
                }


                body {
                  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
                  background: var(--dark-bg);
                  color: #fff;
                    min-height: 100vh;
                    overflow-x: hidden;
                }


                .hidden { display: none !important; }


                /* ===== HEADER ===== */
                .header {
                  background: linear-gradient(135deg, #000 0%, #222 100%);
                  padding: 15px 20px;

                    display: flex;
                    justify-content: space-between;
                    align-items: center;
                    position: relative;
                    border-bottom: 2px solid var(--accent-color);
                    height: 100px;
                    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.5);
                    position: fixed;
                    top: 0;
                    left: 0;
                    right: 0;
                    z-index: 1000;
                }

                .app-title {
                  display: flex;
                  align-items: center;
                  gap: 15px;
                }

                .bull, .bear {
                  font-size: 42px;
                  animation: pulse 2s infinite;
                }


                .bull {
                  color: var(--success-color);
                  text-shadow: 0 0 10px rgba(0, 255, 0, 0.5);
                }
                .bear {
                  color: var(--danger-color);
                  text-shadow: 0 0 10px rgba(255, 0, 0, 0.5);
                }


                @keyframes pulse {
                 0%, 100% { transform: scale(1); }
                    50% { transform: scale(1.1); }
                }

                .title-text {
                   font-size: 46px;
                   font-weight: 900;
                   letter-spacing: 3px;
                   background: linear-gradient(90deg, #00ffcc, #00ff00, #00ccff, #ff00ff);
                    -webkit-background-clip: text;
                    -webkit-text-fill-color: transparent;
                    background-clip: text;
                    text-shadow: 0 2px 10px rgba(0, 0, 0, 0.5);
                }


                /* ===== LIVE WATCH ===== */
                .live-watch-container {
                    position: absolute;
                    right: 20px;
                    top: 50%;
                    transform: translateY(-50%);
                    text-align: center;
                }

                .live-watch {
                    font-size: 14px;
                    color: #aaa;
                    margin-bottom: 2px;
                }

                .digital-clock {
                   font-size: 22px;
                   font-weight: bold;
                    color: var(--accent-color);
                    text-shadow: 0 0 10px rgba(0, 204, 255, 0.5);
                    background: rgba(0, 0, 0, 0.3);
                    padding: 5px 12px;
                    border-radius: 8px;
                    border: 1px solid rgba(0, 204, 255, 0.3);
                }


                .user-box {
                  position: absolute;

                    right: 200px;
                    top: 50%;
                    transform: translateY(-50%);
                    text-align: right;
                }


                .user-name {
                  font-size: 25px;
                    font-weight: bold;
                    color: #fff;
                    margin-bottom: 5px;
                }

                .pl-box {
                   margin-top: 6px;
                   padding: 8px 16px;
                   font-size: 20px;
                   font-weight: bold;
                   border-radius: 10px;
                   background: linear-gradient(135deg, #111 0%, #333 100%);
                   display: inline-block;
                   transition: all 0.3s ease;
                   border: 1px solid rgba(255, 255, 255, 0.1);
                   box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
                }

                /* ===== ENHANCED HORIZONTAL MARKET TICKER ===== */
                .market-ticker-container {
                  background: linear-gradient(90deg, #111 0%, #222 50%, #111 100%);
                    padding: 10px 0;
                    border-bottom: 2px solid rgba(0, 204, 255, 0.5);
                    overflow: hidden;
                    position: fixed;
                    top: 100px;
                    left: 0;
                    right: 0;
                    height: 60px;
                    z-index: 999;
                }

                .ticker-header {
                   position: absolute;
                   left: 0;
                   top: 0;
                    background: linear-gradient(90deg, #ff0000, #ff9900);
                    color: white;
                    padding: 10px 20px;
                    font-weight: bold;
                    z-index: 10;
                    border-right: 2px solid rgba(255,255,255,0.3);
                }

                .market-ticker {
                  display: flex;
                  animation: tickerScroll 30s linear infinite;
                  white-space: nowrap;
                  padding-left: 120px;
                }

                .ticker-item-horizontal {
                   display: flex;
                   align-items: center;
                   padding: 0 25px;
                   border-right: 1px solid rgba(255, 255, 255, 0.1);
                   background: rgba(0, 0, 0, 0.3);
                   margin: 5px 0;
                   border-radius: 5px;
                   position: relative;
                    transition: all 0.3s ease;
                }

                .ticker-item-horizontal:hover {
                    background: rgba(0, 204, 255, 0.2);
                    transform: scale(1.05);
                }


                .ticker-symbol {
                   color: #fff;

                    font-weight: bold;
                    margin-right: 8px;
                    min-width: 80px;
                    font-size: 16px;
                }


                .ticker-price {
                   color: var(--success-color);
                    font-weight: bold;
                    font-size: 18px;
                    margin-right: 5px;
                    text-shadow: 0 0 5px currentColor;
                }

                .ticker-change {
                   color: var(--danger-color);
                   font-size: 14px;
                   font-weight: bold;
                   padding: 2px 8px;
                   border-radius: 3px;
                   background: rgba(0,0,0,0.3);
                }

                .positive {
                  color: var(--success-color) !important;
                  background: rgba(0, 255, 0, 0.1) !important;
                }
                .negative {
                  color: var(--danger-color) !important;
                    background: rgba(255, 0, 0, 0.1) !important;
                }

                .delete-ticker {
                    background: rgba(255, 0, 0, 0.7);
                    color: white;
                    border: none;
                    border-radius: 50%;
                    width: 20px;
                    height: 20px;

                    margin-left: 10px;
                    cursor: pointer;
                    font-size: 12px;
                    font-weight: bold;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    opacity: 0;
                    transition: all 0.3s ease;
                }


                .ticker-item-horizontal:hover .delete-ticker {
                   opacity: 1;
                }

                .delete-ticker:hover {
                  background: rgba(255, 0, 0, 1);
                  transform: scale(1.2);
                }

                @keyframes tickerScroll {
                  0% { transform: translateX(0); }
                  100% { transform: translateX(-50%); }
                }


                /* ===== SEPARATED NAVIGATION POPUP (LEFT SIDE) ===== */
                .nav-hover-trigger {
                  position: fixed;
                  top: 180px;
                    left: 0;
                    background: linear-gradient(135deg, var(--accent-color), #0066cc);
                    color: white;
                    border: none;
                    padding: 12px 15px;
                    border-radius: 0 10px 10px 0;
                    cursor: pointer;
                    z-index: 999;
                    font-size: 20px;
                    transition: all 0.3s ease;

                    box-shadow: 2px 0 10px rgba(0,0,0,0.3);
                }

                .nav-hover-trigger:hover {
                  padding-left: 20px;
                    background: linear-gradient(135deg, #00ccff, #0099ff);
                }

                .nav-popup {
                  position: fixed;
                  top: 180px;
                  left: -300px;
                  width: 300px;
                  background: linear-gradient(180deg, #141414 0%, #1a1a1a 100%);
                  border-radius: 0 15px 15px 0;
                  padding: 15px 10px;
                  overflow-y: auto;
                  border-right: 2px solid rgba(0, 204, 255, 0.5);
                  border-bottom: 2px solid rgba(0, 204, 255, 0.5);
                  border-top: 2px solid rgba(0, 204, 255, 0.5);
                  box-shadow: 5px 5px 15px rgba(0, 0, 0, 0.5);
                  transition: left 0.3s ease;
                  z-index: 998;
                  max-height: 80vh;
                }

                .nav-popup.show {
                  left: 0;
                }


                .nav-popup-header {
                  color: var(--accent-color);
                  font-size: 18px;
                    font-weight: bold;
                    margin-bottom: 15px;
                    padding-bottom: 10px;
                    border-bottom: 2px solid rgba(0, 204, 255, 0.5);
                    text-align: center;
                    text-transform: uppercase;

                    letter-spacing: 2px;
                    cursor: pointer;
                    user-select: none;
                }


                .nav-popup button {
                  width: 100%;
                  margin-bottom: 8px;
                    padding: 12px 15px;
                    background: linear-gradient(135deg, #2a2a2a 0%, #1a1a1a 100%);
                    border: 1px solid rgba(255, 255, 255, 0.1);
                    color: #fff;
                    cursor: pointer;
                    border-radius: 8px;
                    font-size: 14px;
                    text-align: left;
                    transition: all 0.2s ease;
                    display: flex;
                    align-items: center;
                    gap: 10px;
                    position: relative;
                    overflow: hidden;
                }


                .nav-popup button::before {
                  content: '';
                  position: absolute;
                  left: 0;
                  top: 0;
                    width: 5px;
                    height: 100%;
                    background: var(--accent-color);
                    transform: scaleY(0);
                    transition: transform 0.3s ease;
                }


                .nav-popup button i {
                  font-size: 16px;
                  width: 20px;

                    text-align: center;
                    color: var(--accent-color);
                }

                .nav-popup button:hover {
                    background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%)
                    transform: translateX(5px);
                    box-shadow: 0 4px 12px rgba(0, 123, 255, 0.4);
                }

                .nav-popup button:hover::before {
                  transform: scaleY(1);
                }

                .nav-popup button.active {
                  background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%)
                  border-color: var(--accent-color);
                }

                .nav-popup button.active::before {
                  transform: scaleY(1);
                }

                /* ===== BROKER-STYLE WATCHLIST PANEL ===== */
                .watchlist-panel {
                    position: fixed;
                    top: 160px;
                    right: 0;
                    width: 320px;
                    height: calc(100vh - 160px);
                    background: #1a1a2e;
                    border-left: 1px solid #2a2a3e;
                    z-index: 997;
                    display: flex;
                    flex-direction: column;
                    box-shadow: -2px 0 10px rgba(0,0,0,0.3);
                }

                .wl-header {
                    display: flex;
                    justify-content: space-between;
                    align-items: center;
                    padding: 10px 12px;
                    border-bottom: 1px solid #2a2a3e;
                    background: #141428;
                }

                .wl-header-left {
                    display: flex;
                    align-items: center;
                    gap: 8px;
                }

                .wl-title {
                    color: #fff;
                    font-size: 13px;
                    font-weight: 600;
                    letter-spacing: 0.5px;
                }

                .wl-count {
                    background: #2a2a3e;
                    color: #888;
                    font-size: 11px;
                    padding: 2px 6px;
                    border-radius: 3px;
                }

                .wl-header-right {
                    display: flex;
                    gap: 4px;
                }

                .wl-icon-btn {
                    background: none;
                    border: none;
                    color: #666;
                    cursor: pointer;
                    padding: 4px 6px;
                    border-radius: 3px;
                    font-size: 13px;
                    transition: all 0.2s;
                }

                .wl-icon-btn:hover {
                    color: #fff;
                    background: #2a2a3e;
                }

                .wl-search-container {
                    position: relative;
                    padding: 8px 12px;
                    border-bottom: 1px solid #2a2a3e;
                }

                .wl-search-icon {
                    position: absolute;
                    left: 20px;
                    top: 50%;
                    transform: translateY(-50%);
                    color: #555;
                    font-size: 12px;
                }

                .wl-search-input {
                    width: 100%;
                    padding: 8px 10px 8px 30px;
                    background: #222240;
                    border: 1px solid #333;
                    color: #fff;
                    border-radius: 4px;
                    font-size: 12px;
                    box-sizing: border-box;
                    outline: none;
                    transition: border-color 0.2s;
                }

                .wl-search-input:focus {
                    border-color: var(--accent-color);
                }

                .wl-search-input::placeholder {
                    color: #555;
                    font-size: 11px;
                }

                .wl-search-results {
                    position: absolute;
                    top: 100%;
                    left: 12px;
                    right: 12px;
                    background: #1e1e36;
                    border: 1px solid #333;
                    border-radius: 0 0 4px 4px;
                    max-height: 200px;
                    overflow-y: auto;
                    z-index: 1000;
                }

                .wl-search-result-item {
                    padding: 8px 12px;
                    cursor: pointer;
                    display: flex;
                    justify-content: space-between;
                    align-items: center;
                    border-bottom: 1px solid #2a2a3e;
                    font-size: 12px;
                }

                .wl-search-result-item:hover {
                    background: #2a2a4e;
                }

                .wl-search-result-item .sr-symbol {
                    color: #fff;
                    font-weight: 600;
                }

                .wl-search-result-item .sr-name {
                    color: #888;
                    font-size: 11px;
                }

                .wl-search-result-item .sr-exchange {
                    background: #333;
                    color: #aaa;
                    padding: 1px 5px;
                    border-radius: 2px;
                    font-size: 10px;
                }

                .wl-tabs {
                    display: flex;
                    border-bottom: 1px solid #2a2a3e;
                    background: #141428;
                }

                .wl-tab {
                    flex: 1;
                    padding: 8px 4px;
                    background: none;
                    border: none;
                    border-bottom: 2px solid transparent;
                    color: #666;
                    cursor: pointer;
                    font-size: 11px;
                    font-weight: 500;
                    transition: all 0.2s;
                    text-align: center;
                }

                .wl-tab:hover {
                    color: #aaa;
                }

                .wl-tab.active {
                    color: var(--accent-color);
                    border-bottom-color: var(--accent-color);
                }

                .wl-stocks-list {
                    flex: 1;
                    overflow-y: auto;
                    overflow-x: hidden;
                }

                .wl-stocks-list::-webkit-scrollbar {
                    width: 4px;
                }

                .wl-stocks-list::-webkit-scrollbar-thumb {
                    background: #333;
                    border-radius: 2px;
                }

                .wl-item {
                    display: flex;
                    justify-content: space-between;
                    align-items: center;
                    padding: 8px 12px;
                    border-bottom: 1px solid #1e1e36;
                    cursor: pointer;
                    transition: background 0.15s;
                    position: relative;
                }

                .wl-item:hover {
                    background: #222240;
                }

                .wl-item-left {
                    display: flex;
                    flex-direction: column;
                    gap: 2px;
                    min-width: 0;
                    flex: 1;
                }

                .wl-item-symbol {
                    color: #fff;
                    font-size: 13px;
                    font-weight: 600;
                    display: flex;
                    align-items: center;
                    gap: 6px;
                }

                .wl-item-exchange {
                    background: #2a2a3e;
                    color: #888;
                    padding: 1px 4px;
                    border-radius: 2px;
                    font-size: 9px;
                    font-weight: 400;
                }

                .wl-item-exchange.exchange-nfo {
                    background: rgba(156, 78, 221, 0.25);
                    color: #b388ff;
                }

                .wl-item-exchange.exchange-bse {
                    background: rgba(255, 152, 0, 0.2);
                    color: #ffb74d;
                }

                .wl-item-name {
                    color: #666;
                    font-size: 10px;
                    white-space: nowrap;
                    overflow: hidden;
                    text-overflow: ellipsis;
                }

                .wl-item-right {
                    display: flex;
                    flex-direction: column;
                    align-items: flex-end;
                    gap: 2px;
                    min-width: 90px;
                }

                .wl-item-price {
                    font-size: 13px;
                    font-weight: 600;
                }

                .wl-item-change {
                    font-size: 11px;
                    display: flex;
                    gap: 6px;
                }

                .wl-item-change .change-abs {
                    font-weight: 500;
                }

                .wl-item-change .change-pct {
                    font-weight: 500;
                }

                .wl-positive .wl-item-price { color: #00cc66; }
                .wl-positive .wl-item-change { color: #00cc66; }
                .wl-negative .wl-item-price { color: #ff4444; }
                .wl-negative .wl-item-change { color: #ff4444; }
                .wl-neutral .wl-item-price { color: #fff; }
                .wl-neutral .wl-item-change { color: #888; }

                /* Hover action buttons overlay */
                .wl-item-actions {
                    display: none;
                    position: absolute;
                    right: 8px;
                    top: 50%;
                    transform: translateY(-50%);
                    gap: 4px;
                    z-index: 10;
                }

                .wl-item:hover .wl-item-actions {
                    display: flex;
                }

                .wl-item:hover .wl-item-right {
                    visibility: hidden;
                }

                .wl-action-buy {
                    background: #00cc66;
                    color: #fff;
                    border: none;
                    padding: 4px 10px;
                    border-radius: 3px;
                    font-size: 11px;
                    font-weight: 700;
                    cursor: pointer;
                    transition: background 0.15s;
                }

                .wl-action-buy:hover { background: #00aa55; }

                .wl-action-sell {
                    background: #ff4444;
                    color: #fff;
                    border: none;
                    padding: 4px 10px;
                    border-radius: 3px;
                    font-size: 11px;
                    font-weight: 700;
                    cursor: pointer;
                    transition: background 0.15s;
                }

                .wl-action-sell:hover { background: #dd3333; }

                .wl-action-more {
                    background: #333;
                    color: #fff;
                    border: none;
                    padding: 4px 6px;
                    border-radius: 3px;
                    font-size: 11px;
                    cursor: pointer;
                    transition: background 0.15s;
                }

                .wl-action-more:hover { background: #444; }

                .wl-action-delete {
                    background: none;
                    border: none;
                    color: #ff4444;
                    cursor: pointer;
                    padding: 4px 6px;
                    font-size: 12px;
                    border-radius: 3px;
                    transition: all 0.15s;
                }

                .wl-action-delete:hover { background: rgba(255,68,68,0.15); }

                /* Pagination */
                .wl-pagination {
                    display: flex;
                    justify-content: center;
                    align-items: center;
                    gap: 4px;
                    padding: 8px 12px;
                    border-top: 1px solid #2a2a3e;
                    background: #141428;
                }

                .wl-page-btn {
                    background: none;
                    border: 1px solid #333;
                    color: #888;
                    width: 28px;
                    height: 28px;
                    border-radius: 3px;
                    cursor: pointer;
                    font-size: 11px;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    transition: all 0.2s;
                }

                .wl-page-btn:hover {
                    border-color: var(--accent-color);
                    color: #fff;
                }

                .wl-page-btn.active {
                    background: var(--accent-color);
                    border-color: var(--accent-color);
                    color: #fff;
                }

                .wl-empty {
                    text-align: center;
                    color: #555;
                    padding: 30px 15px;
                    font-size: 12px;
                }

                /* ===== LARGER CONTENT (ADJUSTED FOR WATCHLIST PANEL) ===== */
                .content {
                  margin-top: 160px;
                    margin-left: 0;
                    margin-right: 320px; /* Space for watchlist panel */
                    padding: 20px;
                    min-height: calc(100vh - var(--top-offset));
                    transition: all 0.3s ease;
                    overflow: auto;
                    position: relative;
                    width: calc(100% - 320px); /* Adjusted for watchlist panel */
                    height: calc(100vh - 160px);
                    overflow-y: auto;

                    overflow-x: hidden;
                }

                /* ===== ENHANCED OPEN POSITIONS CONTAINER ===== */
                .open-positions-container {
                    display: flex;
                    gap: 20px;
                    min-height: calc(100vh - var(--top-offset) - 40px);
                    height: auto;
                    width: 100%;
                    overflow: visible;
                }

                /* ===== ENHANCED POSITIONS MAIN CONTENT ===== */
                .positions-main {
                  flex: 1;
                  background: #1a1a1a;
                  border-radius: 10px;
                  padding: 25px;
                  border: 1px solid #333;
                  min-height: calc(100vh - 220px);
                  overflow: auto;
                }


                .positions-header {
                  display: flex;
                  justify-content: space-between;
                  align-items: center;
                  margin-bottom: 25px;
                }

                .positions-header h2 {
                  color: var(--accent-color);
                    font-size: 28px;
                    margin: 0;
                    display: flex;
                    align-items: center;
                    gap: 10px;
                }

                .add-position-btn {
                  background: linear-gradient(135deg, #00cc00, #009900);
                  color: white;
                  border: none;
                    padding: 12px 24px;
                    border-radius: 5px;
                    cursor: pointer;
                    font-weight: bold;
                    font-size: 16px;
                    display: flex;
                    align-items: center;
                    gap: 8px;
                }

                .add-position-btn:hover {
                  background: linear-gradient(135deg, #00ff00, #00cc00);
                }

                /* Table Styles */
                .positions-table {
                  width: 100%;
                  border-collapse: collapse;
                  background: #2b2b2b;
                  font-size: 14px;
                  min-width: 1500px;
                }

                .positions-table th {
                    background: #4a4a4a;
                    padding: 15px 10px;
                    border: 1px solid #555;
                    text-align: center;
                    font-weight: bold;
                    color: var(--accent-color);
                    font-size: 15px;
                    white-space: nowrap;
                }

                .positions-table td {
                  padding: 12px 10px;
                  border: 1px solid #555;
                  text-align: center;
                  font-size: 14px;
                }

                .positions-table tr:hover {
                    background: #3a3a3a;
                }


                /* Order Type Styling */
                .order-type-buy {
                  background: #00aa66;
                  color: #fff;
                  padding: 6px 10px;
                  border-radius: 4px;
                  font-size: 12px;
                  font-weight: bold;
                }

                .order-type-sell {
                  background: #ff4444;
                  color: #fff;
                  padding: 6px 10px;
                  border-radius: 4px;
                  font-size: 12px;
                  font-weight: bold;
                }


                /* Order Condition Styling */
                .order-condition {
                  padding: 6px 10px;
                    border-radius: 4px;
                    font-size: 12px;
                    font-weight: bold;
                }

                .condition-intraday {

                    background: #0077ff;
                    color: #fff;
                }

                .condition-positional {
                    background: #aa00ff;
                    color: #fff;
                }


                .condition-bo {
                  background: #ff8800;
                  color: #fff;
                }

                .condition-st {
                  background: #ff0088;
                  color: #fff;
                }

                .condition-msl {
                  background: #008888;
                  color: #fff;
                }


                /* Qty Columns */
                .buy-qty {
                  color: #00ff88;
                  font-weight: bold;
                }


                .sell-qty {
                   color: #ff4444;
                   font-weight: bold;
                }

                /* P&L Colors */
                .pl-positive {
                   color: #00ff88;
                   font-weight: bold;

                }

                .pl-negative {
                   color: #ff4444;
                   font-weight: bold;
                }

                /* Symbol Quick Menu */
                .symbol-cell {
                   position: relative;
                   cursor: pointer;
                }

                .quick-popup {
                  position: absolute;
                  top: 100%;
                  left: 0;
                  background: #1f1f1f;
                  padding: 8px;
                  border-radius: 5px;
                  display: none;
                  gap: 4px;
                  z-index: 100;
                }


                .symbol-cell:hover .quick-popup {
                   display: flex;
                }


                .q-btn {
                   padding: 6px 10px;
                   font-size: 12px;
                   border: none;
                    border-radius: 3px;
                    cursor: pointer;
                    color: #fff;
                }

                .q-btn.buy {

                    background: #00aa66;
                }

                .q-btn.sell {
                   background: #ff4444;
                }

                .q-btn.chart {
                    background: #0077ff;
                }


                .q-btn.depth {
                   background: #888;
                }

                .q-btn.delete-btn-main {
                   background: #aa0000;
                }

                .q-btn.more {
                   background: #555;
                   position: relative;
                }


                .more-menu-main {
                  position: absolute;
                  top: 100%;
                  left: 0;
                  background: #111;
                    display: none;
                    border-radius: 4px;
                }


                .more-menu-main div {
                  padding: 8px 12px;
                  font-size: 12px;
                    cursor: pointer;
                }

                .more-menu-main div:hover {
                  background: #444;
                }

                .q-btn.more:hover .more-menu-main {
                    display: block;
                }

                /* Source Menu */
                .source-wrap {
                  position: relative;
                }

                .source-btn {
                  background: #0077ff;
                  border: none;
                  color: #fff;
                  padding: 6px 12px;
                  border-radius: 4px;
                  cursor: pointer;
                  font-size: 12px;
                }

                .source-menu {
                  position: absolute;
                  top: 100%;
                  left: 0;
                  background: #1f1f1f;
                  display: none;
                }

                .source-menu div {
                  padding: 8px 12px;
                    font-size: 12px;
                    cursor: pointer;
                }


                .source-menu div:hover {
                  background: #444;

                }

                .source-wrap:hover .source-menu {
                  display: block;
                }


                /* Action Button */
                .action-btn {
                    background: #555;
                    border: none;
                    color: #fff;
                    padding: 8px 12px;
                    border-radius: 4px;
                    cursor: pointer;
                    font-size: 12px;
                    font-weight: bold;
                }

                .action-btn:hover {
                  background: #666;
                }

                /* ===== LARGER MODALS ===== */
                .modal {
                  position: fixed;
                  inset: 0;
                  background: rgba(0, 0, 0, 0.8);
                  display: none;
                  justify-content: center;
                    align-items: center;
                    z-index: 9999;
                    overflow: auto;
                    padding: 20px;
                }

                .modal-box {
                    width: 600px;
                    max-width: 95%;
                    max-height: 90vh;

                    background: #2f2f2f;
                    border-radius: 10px;
                    padding: 20px;
                    border: 2px solid var(--accent-color);
                    overflow-y: auto;
                    overflow-x: hidden;
                }

                .modal-header {
                  display: flex;
                  justify-content: space-between;
                  align-items: center;
                  margin-bottom: 20px;
                }

                .modal-header h3 {
                  margin: 0;
                  font-size: 22px;
                  color: var(--accent-color);
                }

                .modal-header button {
                  background: none;
                  border: none;
                  color: #fff;
                  font-size: 24px;
                  cursor: pointer;
                }


                .tabs {
                   display: flex;
                   margin-top: 10px;
                   background: #333;
                    border-radius: 5px;
                    overflow: hidden;
                }


                .tabs button {
                   flex: 1;

                    background: none;
                    border: none;
                    padding: 12px;
                    color: #fff;
                    cursor: pointer;
                    font-size: 14px;
                    transition: all 0.3s ease;
                }


                .tabs button:hover {
                   background: #444;
                }

                .tabs button.active {
                   background: #0077ff;
                   font-weight: bold;
                }

                .tab-content {
                   display: none;
                   margin-top: 15px;
                }

                .tab-content.active {
                   display: block;
                }

                .modal-box input,
                .modal-box select,
                .modal-box textarea {
                  width: 100%;
                  padding: 10px;
                  margin: 8px 0;
                    background: #444;
                    border: none;
                    color: #fff;
                    font-size: 14px;
                    border-radius: 4px;
                }

                .modal-box textarea {
                  height: 120px;
                  resize: vertical;
                  font-family: 'Courier New', monospace;
                }

                .full-btn {
                    width: 100%;
                    padding: 12px;
                    margin-top: 15px;
                    border: none;
                    color: #fff;
                    cursor: pointer;
                    font-size: 16px;
                    font-weight: bold;
                    border-radius: 4px;
                }

                .success {
                  background: #00aa66;
                }

                .danger {
                  background: #ff4444;
                }

                .info {
                   background: #0077ff;
                }

                /* ===== NEW POSITION SECTION STYLES ===== */
                .position-section {
                    margin: 15px 0;
                    background: #222;
                    border-radius: 8px;
                    border-left: 4px solid var(--accent-color);
                    overflow: hidden;
                }

                .position-section-header {
                  padding: 15px 20px;
                  background: rgba(0, 204, 255, 0.1);
                  display: flex;
                    justify-content: space-between;
                    align-items: center;
                    cursor: pointer;
                    user-select: none;
                }


                .position-section-header h4 {
                  color: var(--accent-color);
                  margin: 0;
                  display: flex;
                  align-items: center;
                  gap: 8px;
                  font-size: 16px;
                }

                .position-section-toggle {
                  background: none;
                  border: none;
                  color: var(--accent-color);
                  cursor: pointer;
                  font-size: 14px;
                  padding: 6px 10px;
                  border-radius: 3px;
                  transition: all 0.3s ease;
                }

                .position-section-toggle:hover {
                  background: rgba(0, 204, 255, 0.2);
                }

                .position-section-body {
                    padding: 20px;
                    max-height: 400px;
                    overflow-y: auto;

                    transition: all 0.3s ease;
                }

                .position-section-body.collapsed {
                  display: none;
                }

                /* ===== ENABLE/DISABLE OPTIONS WITH MOUSE CLICK ===== */
                .enable-option {
                  background: rgba(0, 204, 255, 0.1);
                  padding: 12px 15px;
                  border-radius: 5px;
                  margin: 10px 0;
                  cursor: pointer;
                  transition: all 0.3s ease;
                  border-left: 4px solid transparent;
                  display: flex;
                  justify-content: space-between;
                  align-items: center;
                }

                .enable-option:hover {
                  background: rgba(0, 204, 255, 0.2);
                  border-left-color: var(--accent-color);
                }

                .enable-option.active {
                  background: rgba(0, 204, 255, 0.3);
                  border-left-color: var(--success-color);
                }

                .enable-status {
                  width: 24px;
                    height: 24px;
                    border-radius: 50%;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                }

                .enable-status.enabled {
                  background: var(--success-color);
                  color: #000;
                }


                .enable-status.disabled {
                  background: var(--danger-color);
                    color: #fff;
                }


                /* ===== PARTITION & ADD QUANTITY SECTION STYLES ===== */
                .partition-section {
                  margin: 15px 0;
                  background: #222;
                  border-radius: 8px;
                  border-left: 4px solid var(--warning-color);
                  overflow: hidden;
                }

                .partition-section-header {
                  padding: 15px 20px;
                  background: rgba(255, 153, 0, 0.1);
                  display: flex;
                  justify-content: space-between;
                  align-items: center;
                  cursor: pointer;
                  user-select: none;
                }


                .partition-section-header h4 {
                  color: var(--warning-color);
                  margin: 0;
                    display: flex;
                    align-items: center;
                    gap: 8px;
                    font-size: 16px;
                }

                .partition-section-toggle {
                  background: none;
                  border: none;
                  color: var(--warning-color);
                  cursor: pointer;
                    font-size: 14px;
                    padding: 6px 10px;
                    border-radius: 3px;
                    transition: all 0.3s ease;
                }


                .partition-section-toggle:hover {
                  background: rgba(255, 153, 0, 0.2);
                }

                .partition-section-body {
                  padding: 20px;
                  transition: all 0.3s ease;
                }

                .partition-section-body.collapsed {
                  display: none;
                }


                .partition-grid {
                  display: grid;
                  grid-template-columns: 1fr 1fr;
                  gap: 20px;
                }


                .partition-column {
                  display: flex;
                  flex-direction: column;
                    gap: 15px;
                }


                .partition-item {
                  background: #333;
                  padding: 15px;

                    border-radius: 5px;
                    border: 1px solid #444;
                }

                .partition-item h5 {
                    color: var(--accent-color);
                    font-size: 14px;
                    margin-bottom: 10px;
                    display: flex;
                    align-items: center;
                    gap: 5px;
                }

                .partition-row {
                  display: grid;
                  grid-template-columns: 1fr 1fr;
                  gap: 10px;
                }

                /* ===== ENHANCED SCROLLING ===== */
                .content::-webkit-scrollbar {
                  width: 12px;
                }


                .content::-webkit-scrollbar-track {
                  background: rgba(0, 0, 0, 0.3);
                  border-radius: 5px;
                }


                .content::-webkit-scrollbar-thumb {
                  background: linear-gradient(135deg, var(--accent-color), #0066cc);
                  border-radius: 5px;
                }


                .content::-webkit-scrollbar-thumb:hover {
                  background: linear-gradient(135deg, #00ccff, #0099ff);
                }

                /* Position Section Scrollbar */

                .position-section-body::-webkit-scrollbar {
                  width: 8px;
                }

                .position-section-body::-webkit-scrollbar-track {
                    background: rgba(0, 0, 0, 0.2);
                    border-radius: 3px;
                }


                .position-section-body::-webkit-scrollbar-thumb {
                  background: var(--accent-color);
                  border-radius: 3px;
                }

                /* Watchlist Scrollbar */
                .watchlist-panel .watchlist-stocks::-webkit-scrollbar {
                  width: 6px;
                }

                .watchlist-panel .watchlist-stocks::-webkit-scrollbar-track {
                  background: rgba(0, 0, 0, 0.3);
                  border-radius: 3px;
                }


                .watchlist-panel .watchlist-stocks::-webkit-scrollbar-thumb {
                  background: #0077ff;
                  border-radius: 3px;
                }


                /* Modal Scrollbar */
                .modal-box::-webkit-scrollbar {
                  width: 8px;
                }


                .modal-box::-webkit-scrollbar-track {
                  background: rgba(0, 0, 0, 0.2);
                    border-radius: 3px;
                }

                .modal-box::-webkit-scrollbar-thumb {
                  background: var(--warning-color);
                  border-radius: 3px;
                }


                /* ===== RESPONSIVE ===== */
                @media (max-width: 1200px) {
                  .open-positions-container {
                        flex-direction: column;
                    }


                    .positions-main {
                      min-height: auto;
                    }
                }

                @media (max-width: 1100px) {
                 .watchlist-panel {
                   width: 280px;
                 }

                    .content {
                      margin-right: 280px;
                      width: calc(100% - 280px);
                    }
                }

                @media (max-width: 900px) {
                 .content {
                        margin-top: 160px;
                        padding: 15px;
                    }


                    .watchlist-panel {
                      display: none; /* Hide watchlist on smaller screens */
                    }


                    .content {
                      margin-right: 0;

                        width: 100%;
                    }

                    .nav-hover-trigger {
                      top: 160px;
                        padding: 10px 12px;
                        font-size: 18px;
                    }


                    .nav-popup {
                      top: 160px;
                      width: 250px;
                    }
                }

                @media (max-width: 768px) {
                 .header {
                   flex-direction: column;
                   height: auto;
                   padding: 15px;
                 }

                    .app-title {
                      margin-bottom: 15px;
                    }

                    .live-watch-container {
                        position: relative;
                        right: auto;
                        top: auto;
                        transform: none;
                        margin: 10px 0;
                    }


                    .user-box {
                      position: relative;
                        right: auto;
                        top: auto;
                        transform: none;

                        text-align: center;
                        margin-top: 10px;
                    }

                    .content {
                        margin: 10px;
                        margin-top: 160px;
                    }


                    .nav-popup button {
                      padding: 10px 12px;
                      font-size: 13px;
                    }

                    .positions-table {
                      font-size: 12px;
                    }

                    .positions-table th,
                    .positions-table td {
                      padding: 8px 6px;
                    }

                    .q-btn {
                       padding: 5px 8px;
                       font-size: 11px;
                    }

                    .modal-box {
                        width: 95%;
                        margin: 10px;
                    }


                    .section-grid,
                    .partition-grid {
                       grid-template-columns: 1fr;
                    }

                    .position-row {

                        flex-direction: column;
                        align-items: flex-start;
                    }

                    .position-toggle {
                        width: 100%;
                        justify-content: space-between;
                    }


                    .position-controls {
                      width: 100%;
                    }
                }

                @media (max-width: 480px) {
                 .title-text {
                    font-size: 32px;
                 }

                    .bull, .bear {
                      font-size: 32px;
                    }

                    .user-name {
                      font-size: 20px;
                    }

                    .pl-box {
                       font-size: 16px;
                        padding: 6px 12px;
                    }

                    .partition-row {
                        grid-template-columns: 1fr;
                    }


                    .nav-popup {
                      width: 220px;
                    }

                }
             </style>
</head>
<body>
    <!-- ===== HEADER ===== -->
    <div class="header">
        <div class="app-title">
            <span class="bull">&#x1F402;</span>
            <span class="title-text">MUKESH ALGO</span>
            <span class="bear">&#x1F43B;</span>
        </div>

        <!-- USER BOX -->
        <div class="user-box">
            <div class="user-name">Mukeshbhai</div>
            <div class="pl-box" id="plBox">P/L : 1,25,430</div>
        </div>

        <!-- LIVE WATCH -->
        <div class="live-watch-container">
            <div class="live-watch">LIVE</div>
            <div class="digital-clock" id="digitalClock">00:00:00</div>
        </div>
    </div>

    <!-- ===== ENHANCED HORIZONTAL MARKET TICKER ===== -->
    <div class="market-ticker-container">
        <div class="ticker-header">LIVE MARKET</div>
        <div class="market-ticker" id="marketTicker">
            <!-- Ticker items will be populated by JavaScript -->
        </div>
    </div>

    <!-- ===== SEPARATE NAVIGATION POPUP (LEFT SIDE) ===== -->
    <button class="nav-hover-trigger" id="navHoverTrigger" onmouseenter="showNavPopup()">
        <i class="fas fa-bars"></i>
    </button>

    <div class="nav-popup" id="navPopup" onmouseleave="hideNavPopup()">
        <div class="nav-popup-header">
            <i class="fas fa-bars"></i> NAVIGATION
        </div>
        <button onclick="showPage('openPositionsPage')">
            <i class="fas fa-chart-line"></i> Open Positions
        </button>
        <button onclick="showPage('orderbookPage')">
            <i class="fas fa-book"></i> Order Book
        </button>
        <button onclick="openScreenerPopup()">
            <i class="fas fa-search"></i> Screener
        </button>
        <button onclick="openStrategyPopup()">
            <i class="fas fa-chess-board"></i> Strategy Creation
        </button>
        <button onclick="showPage('reportPage')">
            <i class="fas fa-chart-bar"></i> Reports
        </button>
        <button onclick="showPage('profilePage')">
            <i class="fas fa-user"></i> Profile
        </button>
        <button onclick="showPage('brokerPage')">
            <i class="fas fa-university"></i> Broker
        </button>
        <button onclick="showPage('marketplacePage')">
            <i class="fas fa-store"></i> Market Place
        </button>
        <button onclick="showPage('paperTradingPage')">
            <i class="fas fa-file-invoice-dollar"></i> Paper Trading
        </button>
        <button onclick="showPage('myPlanPage')">
            <i class="fas fa-calendar-alt"></i> My Plan
        </button>
        <button onclick="showPage('backtestPage')">
            <i class="fas fa-history"></i> Backtest
        </button>
        <button onclick="showPage('settingsPage')">
            <i class="fas fa-cog"></i> Settings
        </button>
        <button onclick="showPage('alPage')">
            <i class="fas fa-robot"></i> AL
        </button>

        <!-- Dashboard Controls -->
        <div style="margin-top: 20px; padding: 10px; background: rgba(0,0,0,0.3); border-radius: 5px;">
            <h4 style="color: var(--accent-color); font-size: 14px; margin-bottom: 10px; text-transform: uppercase;">
                <i class="fas fa-expand"></i> VIEW CONTROLS
            </h4>
            <button onclick="fullScreenMode()" style="width:100%; margin-bottom:5px; padding:8px; background: linear-gradient(135deg, #0077ff, #0055cc); border: none; color: #fff; border-radius: 5px; cursor: pointer;">
                <i class="fas fa-expand"></i> Full Screen
            </button>
            <button onclick="resetAllData()" style="width:100%; padding:8px; background: linear-gradient(135deg, #ff4444, #cc0000); border: none; color: #fff; border-radius: 5px; cursor: pointer;">
                <i class="fas fa-redo"></i> Reset Data
            </button>
        </div>

        <button onclick="logOut()" style="margin-top: 20px; width:100%; padding:10px; background: linear-gradient(135deg, #ff4444, #cc0000); border: none; color: #fff; border-radius: 5px; cursor: pointer;">
            <i class="fas fa-sign-out-alt"></i> Log Out
        </button>
    </div>

    <!-- ===== SEPARATE WATCHLIST PANEL (RIGHT SIDE - ALWAYS VISIBLE) ===== -->
    <div class="watchlist-panel" id="watchlistPanel">
        <div class="wl-header">
            <div class="wl-header-left">
                <i class="fas fa-star" style="color: var(--accent-color);"></i>
                <span class="wl-title">WATCHLIST</span>
                <span class="wl-count" id="wlCount">0/50</span>
            </div>
            <div class="wl-header-right">
                <button class="wl-icon-btn" onclick="refreshWatchlist()" title="Refresh"><i class="fas fa-sync-alt"></i></button>
                <button class="wl-icon-btn" onclick="toggleWatchlistSettings()" title="Settings"><i class="fas fa-cog"></i></button>
            </div>
        </div>

        <div class="wl-search-container">
            <i class="fas fa-search wl-search-icon"></i>
            <input id="watchlistSearch" class="wl-search-input" placeholder="Search eg: INFY, NIFTY FUT, NIFTY 25000 CE" autocomplete="off">
            <div class="wl-search-results" id="wlSearchResults" style="display:none;"></div>
        </div>

        <div class="wl-tabs">
            <button class="wl-tab active" data-tab="watchlist" onclick="switchWatchlistTab('watchlist')">Watchlist</button>
            <button class="wl-tab" data-tab="predefined" onclick="switchWatchlistTab('predefined')">Predefined</button>
            <button class="wl-tab" data-tab="optionchain" onclick="switchWatchlistTab('optionchain')">Option Chain</button>
        </div>

        <div class="wl-stocks-list" id="watchlistStocks">
            <div class="wl-empty">No stocks in watchlist. Search and add stocks above.</div>
        </div>

        <div class="wl-pagination" id="wlPagination"></div>
    </div>

    <!-- ===== MAIN CONTENT ===== -->
    <div class="content" id="mainContent">
        <!-- Open Positions Page -->
        <div class="content-page" id="openPositionsPage">
            <div class="open-positions-container">
                <div class="positions-main">
                    <div class="positions-header">
                        <h2><i class="fas fa-chart-line"></i> Open Positions</h2>
                        <button class="add-position-btn" onclick="openAddPositionModal()">
                            <i class="fas fa-plus"></i> Add Position
                        </button>
                    </div>

                    <div style="overflow-x: auto;">
                        <table class="positions-table">
                            <thead>
                                <tr>
                                    <th>#</th>
                                    <th>Symbol</th>
                                    <th>Order Type</th>
                                    <th>Order Condition</th>
                                    <th>Entry Price</th>
                                    <th>Current Price</th>
                                    <th>Buy Qty</th>
                                    <th>Sell Qty</th>
                                    <th>Buy Avg Price</th>
                                    <th>Sell Avg Price</th>
                                    <th>Day P&amp;L</th>
                                    <th>Net P&amp;L</th>
                                    <th>Net %</th>
                                    <th>Source</th>
                                    <th>Action</th>
                                </tr>
                            </thead>
                            <tbody id="positionsTable">
                                <!-- Positions will be loaded here -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>

        <!-- Other Pages -->
        <div class="content-page hidden" id="orderbookPage">
            <h2><i class="fas fa-book"></i> Order Book &amp; Portfolio</h2>
            <p>Order book content will be displayed here.</p>
        </div>

        <div class="content-page hidden" id="screenerPage">
            <h2><i class="fas fa-search"></i> Stock Screener</h2>
            <p>This page shows advanced stock screening tools.</p>
        </div>

        <div class="content-page hidden" id="strategyCreationPage">
            <h2><i class="fas fa-chess-board"></i> Strategy Creation</h2>
            <p>This page allows you to create trading strategies.</p>
        </div>

        <div class="content-page hidden" id="reportPage">
            <h2><i class="fas fa-chart-bar"></i> Reports</h2>
            <p>This page shows trading reports and analytics.</p>
        </div>

        <!-- ===== ENHANCED BROKER PAGE ===== -->
        <div class="content-page hidden" id="brokerPage">
            <h2><i class="fas fa-university"></i> Broker Management</h2>

            <!-- Connection Status Banner -->
            <div id="brokerStatusBanner" style="background: #1a1a2e; padding: 15px 20px; border-radius: 10px; margin-bottom: 20px; display: flex; align-items: center; gap: 12px; border: 1px solid #2a2a3e;">
                <div id="brokerStatusDot" style="width: 12px; height: 12px; border-radius: 50%; background: #ff4444;"></div>
                <div>
                    <div id="brokerStatusText" style="color: #fff; font-weight: 600;">Not Connected</div>
                    <div id="brokerStatusDetail" style="color: #888; font-size: 12px;">Configure and connect a broker below</div>
                </div>
            </div>

            <!-- Alice Blue Connection -->
            <div style="background: #1a1a1a; padding: 20px; border-radius: 10px; margin-bottom: 20px;">
                <h3 style="color: var(--accent-color); margin-bottom: 20px;">
                    <i class="fas fa-plug"></i> Connect Alice Blue
                </h3>

                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                    <div>
                        <label style="display: block; margin-bottom: 8px; color: #aaa;">Broker</label>
                        <select id="brokerSelect" style="width:100%; padding:10px; background:#333; color:#fff; border:none; border-radius:5px;">
                            <option value="alice_blue" selected>Alice Blue</option>
                            <option value="upstox">Upstox</option>
                        </select>
                    </div>

                    <div>
                        <label style="display: block; margin-bottom: 8px; color: #aaa;">User ID</label>
                        <input type="text" id="clientId" placeholder="e.g. 515175" style="width:100%; padding:10px; background:#333; color:#fff; border:none; border-radius:5px;">
                    </div>

                    <div>
                        <label style="display: block; margin-bottom: 8px; color: #aaa;">Secret Key (long key)</label>
                        <input type="password" id="apiKey" placeholder="Paste your Secret Key here" style="width:100%; padding:10px; background:#333; color:#fff; border:none; border-radius:5px;">
                    </div>

                    <div>
                        <label style="display: block; margin-bottom: 8px; color: #aaa;">App Code (short code)</label>
                        <input type="text" id="apiSecret" placeholder="e.g. cabzLFoeRT" style="width:100%; padding:10px; background:#333; color:#fff; border:none; border-radius:5px;">
                    </div>
                </div>

                <!-- Step 1: Get Login URL -->
                <div style="margin-top: 20px;">
                    <button onclick="brokerGetLoginUrl()" id="btnGetLoginUrl" style="width:100%; padding:12px; background: linear-gradient(135deg, #0077ff, #0055cc); border:none; color:#fff; border-radius:5px; cursor:pointer; font-weight:bold; font-size: 14px;">
                        <i class="fas fa-sign-in-alt"></i> Step 1: Get Login URL
                    </button>
                </div>

                <!-- Login URL Display -->
                <div id="loginUrlSection" style="display:none; margin-top: 15px; background: #222; padding: 15px; border-radius: 8px; border: 1px solid #333;">
                    <label style="display: block; margin-bottom: 8px; color: #aaa;">Login URL (click to open in browser):</label>
                    <div style="display: flex; gap: 8px;">
                        <input type="text" id="loginUrlDisplay" readonly style="flex:1; padding:10px; background:#1a1a1a; color:#00ccff; border:1px solid #333; border-radius:5px; font-size: 11px;">
                        <button onclick="window.open(document.getElementById('loginUrlDisplay').value, '_blank')" style="padding:10px 15px; background:#00aa66; border:none; color:#fff; border-radius:5px; cursor:pointer; font-weight:bold; white-space:nowrap;">
                            <i class="fas fa-external-link-alt"></i> Open
                        </button>
                    </div>
                    <p style="color:#888; font-size: 11px; margin-top: 8px;">Login  Authorize  Copy authCode from the URL after redirect</p>
                </div>

                <!-- Step 2: Authenticate with Auth Code -->
                <div id="authCodeSection" style="display:none; margin-top: 15px;">
                    <label style="display: block; margin-bottom: 8px; color: #aaa;">Authorization Code (from URL after login):</label>
                    <div style="display: flex; gap: 8px;">
                        <input type="text" id="authCodeInput" placeholder="Paste authCode here" style="flex:1; padding:10px; background:#333; color:#fff; border:none; border-radius:5px;">
                        <button onclick="brokerAuthenticate()" id="btnAuthenticate" style="padding:10px 20px; background:#00aa66; border:none; color:#fff; border-radius:5px; cursor:pointer; font-weight:bold; white-space:nowrap;">
                            <i class="fas fa-check-circle"></i> Step 2: Authenticate
                        </button>
                    </div>
                </div>

                <!-- Auth Result -->
                <div id="authResult" style="display:none; margin-top: 15px; padding: 12px; border-radius: 8px;"></div>
            </div>

            <!-- Saved Brokers List -->
            <div style="background: #1a1a1a; padding: 20px; border-radius: 10px; margin-bottom: 20px;">
                <h3 style="color: var(--accent-color); margin-bottom: 15px;">
                    <i class="fas fa-list"></i> Connection History
                </h3>
                <div id="brokerList" style="max-height: 300px; overflow-y: auto;">
                    <!-- Broker list will be loaded here -->
                </div>
            </div>
        </div>

        <div class="content-page hidden" id="profilePage">
            <h2><i class="fas fa-user"></i> Profile</h2>
            <p>User profile content will be displayed here.</p>
        </div>

        <div class="content-page hidden" id="marketplacePage">
            <h2><i class="fas fa-store"></i> Market Place</h2>
            <p>Marketplace content will be displayed here.</p>
        </div>

        <div class="content-page hidden" id="paperTradingPage">
            <h2><i class="fas fa-file-invoice-dollar"></i> Paper Trading</h2>
            <p>Paper trading content will be displayed here.</p>
        </div>

        <div class="content-page hidden" id="myPlanPage">
            <h2><i class="fas fa-calendar-alt"></i> My Plan</h2>
            <p>Plan details will be displayed here.</p>
        </div>

        <div class="content-page hidden" id="backtestPage">
            <h2><i class="fas fa-history"></i> Backtest</h2>
            <p>Backtesting tools will be displayed here.</p>
        </div>

        <div class="content-page hidden" id="settingsPage">
            <h2><i class="fas fa-cog"></i> Settings</h2>
            <p>Settings content will be displayed here.</p>
        </div>

        <div class="content-page hidden" id="alPage">
            <h2><i class="fas fa-robot"></i> AL</h2>
            <p>AI trading tools will be displayed here.</p>
        </div>
    </div>

    <!-- ===== ENHANCED ADD POSITION MODAL ===== -->
    <div id="addPositionModal" class="modal" onclick="outsideCloseAddModal(event)">
        <div class="modal-box">
            <div class="modal-header">
                <h3 id="modalSymbolTitle">Add Position</h3>
                <button onclick="closeAddModal()">&#x2716;</button>
            </div>

            <div>
                <div style="margin-bottom:15px">
                    <label style="display:block;margin-bottom:8px;font-size:14px;color:#aaa">Symbol</label>
                    <input id="positionSymbol" placeholder="Enter stock symbol (e.g., RELIANCE)">
                </div>

                <div style="display:grid;grid-template-columns:1fr 1fr;gap:15px;margin-bottom:15px">
                    <div>
                        <label style="display:block;margin-bottom:8px;font-size:14px;color:#aaa">Order Type</label>
                        <select id="orderType">
                            <option value="BUY">BUY</option>
                            <option value="SELL">SELL</option>
                        </select>
                    </div>
                    <div>
                        <label style="display:block;margin-bottom:8px;font-size:14px;color:#aaa">Order Condition</label>
                        <select id="orderCondition">
                            <option value="Intraday">Intraday</option>
                            <option value="Positional">Positional</option>
                            <option value="BO">BO (Bracket Order)</option>
                            <option value="St">St (Stop Loss)</option>
                            <option value="MSL">MSL (Multiple Stop Loss)</option>
                        </select>
                    </div>
                </div>

                <div style="display:grid;grid-template-columns:1fr 1fr;gap:15px;margin-bottom:15px">
                    <div>
                        <label style="display:block;margin-bottom:8px;font-size:14px;color:#aaa">Buy Qty</label>
                        <input id="buyQty" type="number" placeholder="Buy Qty" value="0">
                    </div>
                    <div>
                        <label style="display:block;margin-bottom:8px;font-size:14px;color:#aaa">Sell Qty</label>
                        <input id="sellQty" type="number" placeholder="Sell Qty" value="0">
                    </div>
                </div>

                <div style="display:grid;grid-template-columns:1fr 1fr;gap:15px;margin-bottom:15px">
                    <div>
                        <label style="display:block;margin-bottom:8px;font-size:14px;color:#aaa">Entry Price</label>
                        <input id="entryPrice" type="number" placeholder="Entry Price">
                    </div>
                    <div>
                        <label style="display:block;margin-bottom:8px;font-size:14px;color:#aaa">Current Price</label>
                        <input id="currentPrice" type="number" placeholder="Current Price">
                    </div>
                </div>

                <div style="display:grid;grid-template-columns:1fr 1fr;gap:15px;margin-bottom:15px">
                    <div>
                        <label style="display:block;margin-bottom:8px;font-size:14px;color:#aaa">Buy Avg Price</label>
                        <input id="buyAvgPrice" type="number" placeholder="Buy Avg Price">
                    </div>
                    <div>
                        <label style="display:block;margin-bottom:8px;font-size:14px;color:#aaa">Sell Avg Price</label>
                        <input id="sellAvgPrice" type="number" placeholder="Sell Avg Price">
                    </div>
                </div>

                <!-- ===== ENABLE/DISABLE OPTIONS ===== -->
                <div style="margin: 20px 0; padding: 15px; background: #222; border-radius: 5px;">
                    <h4 style="color: var(--accent-color); margin-bottom: 15px;">
                        <i class="fas fa-toggle-on"></i> Enable/Disable Options
                    </h4>

                    <div class="enable-option" onclick="toggleEnableOption('positionSettings')">
                        <div><i class="fas fa-cog"></i> Position Settings</div>
                        <div class="enable-status enabled" id="positionSettingsStatus"><i class="fas fa-check"></i></div>
                    </div>

                    <div class="enable-option" onclick="toggleEnableOption('partitionSettings')">
                        <div><i class="fas fa-layer-group"></i> Partition Settings</div>
                        <div class="enable-status enabled" id="partitionSettingsStatus"><i class="fas fa-check"></i></div>
                    </div>

                    <div class="enable-option" onclick="toggleEnableOption('trailingSL')">
                        <div><i class="fas fa-chart-line"></i> Trailing Stop Loss</div>
                        <div class="enable-status enabled" id="trailingSLStatus"><i class="fas fa-check"></i></div>
                    </div>

                    <div class="enable-option" onclick="toggleEnableOption('profitLock')">
                        <div><i class="fas fa-lock"></i> Profit Lock</div>
                        <div class="enable-status disabled" id="profitLockStatus"><i class="fas fa-times"></i></div>
                    </div>
                </div>

                <!-- ===== POSITION SETTINGS SECTION ===== -->
                <div class="position-section" id="positionSettingsSection">
                    <div class="position-section-header" onclick="togglePositionSection()">
                        <h4><i class="fas fa-cog"></i> Position Settings</h4>
                        <button class="position-section-toggle" id="positionSectionToggle">
                            <i class="fas fa-chevron-up"></i> Collapse
                        </button>
                    </div>

                    <div class="position-section-body" id="positionSectionBody">
                        <div class="position-row">
                            <div class="position-toggle">
                                <label class="toggle-switch">
                                    <input type="checkbox" id="toggleOrderType" checked>
                                    <span class="toggle-slider"></span>
                                </label>
                                <span class="toggle-label">Order Type</span>
                            </div>
                            <div class="position-controls">
                                <select id="positionOrderType" class="section-input">
                                    <option value="limit">Limit</option>
                                    <option value="market">Market</option>
                                    <option value="sl">Stop Loss (SL)</option>
                                    <option value="market_sl">Market Stop Loss</option>
                                </select>
                            </div>
                        </div>

                        <div class="position-row">
                            <div class="position-toggle">
                                <label class="toggle-switch">
                                    <input type="checkbox" id="togglePart" checked>
                                    <span class="toggle-slider"></span>
                                </label>
                                <span class="toggle-label">Part</span>
                            </div>
                            <div class="position-controls">
                                <select id="positionPart" class="section-input">
                                    <option value="buy">Buy</option>
                                    <option value="sell">Sell</option>
                                </select>
                            </div>
                        </div>

                        <div class="position-row">
                            <div class="position-toggle">
                                <label class="toggle-switch">
                                    <input type="checkbox" id="toggleQty" checked>
                                    <span class="toggle-slider"></span>
                                </label>
                                <span class="toggle-label">Quantity</span>
                            </div>
                            <div class="position-controls">
                                <div style="display: flex; gap: 10px; width: 100%;">
                                    <input id="positionQty" type="number" placeholder="Buy Qty" value="10" class="section-input" style="flex: 1;">
                                    <input id="positionSellQty" type="number" placeholder="Sell Qty" value="0" class="section-input" style="flex: 1;">
                                </div>
                            </div>
                        </div>

                        <div class="position-row" id="trailingSLRow">
                            <div class="position-toggle">
                                <label class="toggle-switch">
                                    <input type="checkbox" id="toggleTrailingSL" checked>
                                    <span class="toggle-slider"></span>
                                </label>
                                <span class="toggle-label">Trailing SL</span>
                            </div>
                            <div class="position-controls">
                                <div style="display: flex; gap: 10px; width: 100%;">
                                    <select id="trailingSLType" style="flex: 1;">
                                        <option value="point">Point</option>
                                        <option value="price">Price</option>
                                        <option value="spot">Spot</option>
                                        <option value="fut">Futures</option>
                                        <option value="mtm">MTM</option>
                                        <option value="indicator">Indicator Based</option>
                                    </select>
                                    <input id="trailingSLValue" type="number" placeholder="Value" style="flex: 1;" value="20">
                                </div>
                            </div>
                        </div>

                        <div id="indicatorOptions" class="indicator-options" style="display:none;">
                            <div>
                                <label class="indicator-label">Period</label>
                                <input id="indicatorPeriod" type="number" placeholder="Period" class="indicator-input" value="14">
                            </div>
                            <div>
                                <label class="indicator-label">Condition</label>
                                <select id="indicatorCondition" class="indicator-input">
                                    <option value="close">Close</option>
                                    <option value="cross">Cross</option>
                                </select>
                            </div>
                        </div>

                        <div class="position-row">
                            <div class="position-toggle">
                                <label class="toggle-switch">
                                    <input type="checkbox" id="toggleTarget" checked>
                                    <span class="toggle-slider"></span>
                                </label>
                                <span class="toggle-label">Target</span>
                            </div>
                            <div class="position-controls">
                                <div style="display: flex; gap: 10px; width: 100%;">
                                    <select id="targetType" style="flex: 1;">
                                        <option value="point">Point</option>
                                        <option value="price">Price</option>
                                        <option value="spot">Spot</option>
                                        <option value="fut">Futures</option>
                                        <option value="mtm">MTM</option>
                                    </select>
                                    <input id="targetValue" type="number" placeholder="Target Value" style="flex: 1;" value="50">
                                </div>
                            </div>
                        </div>

                        <div class="position-row">
                            <div class="position-toggle">
                                <label class="toggle-switch">
                                    <input type="checkbox" id="toggleExit" checked>
                                    <span class="toggle-slider"></span>
                                </label>
                                <span class="toggle-label">Exit</span>
                            </div>
                            <div class="position-controls">
                                <div style="display: flex; gap: 10px; width: 100%;">
                                    <select id="exitType" style="flex: 1;">
                                        <option value="point">Point</option>
                                        <option value="price">Price</option>
                                        <option value="spot">Spot</option>
                                        <option value="fut">Futures</option>
                                        <option value="mtm">MTM</option>
                                    </select>
                                    <input id="exitValue" type="number" placeholder="Exit Value" style="flex: 1;" value="30">
                                </div>
                            </div>
                        </div>

                        <div class="position-row" id="profitLockRow">
                            <div class="position-toggle">
                                <label class="toggle-switch">
                                    <input type="checkbox" id="toggleProfitLock" checked>
                                    <span class="toggle-slider"></span>
                                </label>
                                <span class="toggle-label">Profit Lock</span>
                            </div>
                            <div class="position-controls">
                                <input id="profitLock" type="number" placeholder="Profit Lock Price" class="section-input">
                            </div>
                        </div>

                        <div class="position-row">
                            <div class="position-toggle">
                                <label class="toggle-switch">
                                    <input type="checkbox" id="toggleProfitGap" checked>
                                    <span class="toggle-slider"></span>
                                </label>
                                <span class="toggle-label">Profit Gap</span>
                            </div>
                            <div class="position-controls">
                                <input id="profitGap" type="number" placeholder="Profit Gap Price" class="section-input">
                            </div>
                        </div>

                        <div style="display: flex; gap: 10px; margin-top: 15px;">
                            <button onclick="toggleAllPositionSettings(true)" style="flex:1; padding:10px; background:#00aa66; border:none; color:#fff; border-radius:5px; cursor:pointer;">
                                <i class="fas fa-toggle-on"></i> All ON
                            </button>
                            <button onclick="toggleAllPositionSettings(false)" style="flex:1; padding:10px; background:#ff4444; border:none; color:#fff; border-radius:5px; cursor:pointer;">
                                <i class="fas fa-toggle-off"></i> All OFF
                            </button>
                            <button onclick="resetPositionSettings()" style="flex:1; padding:10px; background:#0077ff; border:none; color:#fff; border-radius:5px; cursor:pointer;">
                                <i class="fas fa-redo"></i> Reset
                            </button>
                        </div>
                    </div>
                </div>

                <!-- ===== PARTITION & ADD QUANTITY SECTION ===== -->
                <div class="partition-section" id="partitionSettingsSection">
                    <div class="partition-section-header" onclick="togglePartitionSection()">
                        <h4><i class="fas fa-layer-group"></i> Partition &amp; Add Quantity</h4>
                        <button class="partition-section-toggle" id="partitionSectionToggle">
                            <i class="fas fa-chevron-up"></i> Collapse
                        </button>
                    </div>

                    <div class="partition-section-body" id="partitionSectionBody">
                        <div class="partition-grid">
                            <div class="partition-column">
                                <div class="partition-item">
                                    <h5><i class="fas fa-chart-pie"></i> Partition Square Off</h5>
                                    <div class="partition-row">
                                        <div>
                                            <label class="indicator-label">Quantity (Number)</label>
                                            <input id="partitionSquareOffQty" type="number" placeholder="0" class="indicator-input" value="2">
                                        </div>
                                        <div>
                                            <label class="indicator-label">Price</label>
                                            <input id="partitionSquareOffPrice" type="number" placeholder="0.00" class="indicator-input">
                                        </div>
                                    </div>
                                </div>

                                <div class="partition-item">
                                    <h5><i class="fas fa-plus-circle"></i> Add Quantity</h5>
                                    <div class="partition-row">
                                        <div>
                                            <label class="indicator-label">Quantity (Number)</label>
                                            <input id="addQty" type="number" placeholder="0" class="indicator-input" value="5">
                                        </div>
                                        <div>
                                            <label class="indicator-label">Price</label>
                                            <input id="addQtyPrice" type="number" placeholder="0.00" class="indicator-input">
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="partition-column">
                                <div class="partition-item">
                                    <h5><i class="fas fa-sliders-h"></i> Additional Settings</h5>
                                    <div style="display: flex; flex-direction: column; gap: 10px;">
                                        <div>
                                            <label class="indicator-label">Max Partition Count</label>
                                            <input id="maxPartitionCount" type="number" placeholder="5" class="indicator-input" value="5">
                                        </div>
                                        <div>
                                            <label class="indicator-label">Auto Square Off %</label>
                                            <input id="autoSquareOffPercent" type="number" placeholder="10" class="indicator-input" value="10">
                                        </div>
                                        <div>
                                            <label class="indicator-label">Re-entry Attempts</label>
                                            <input id="reentryAttempts" type="number" placeholder="3" class="indicator-input" value="3">
                                        </div>
                                    </div>
                                </div>

                                <div class="partition-item">
                                    <h5><i class="fas fa-calculator"></i> Quick Calculate</h5>
                                    <div style="text-align: center;">
                                        <button onclick="calculatePositionSizing()" style="width:100%; padding:10px; background:#0077ff; border:none; color:#fff; border-radius:5px; cursor:pointer;">
                                            Calculate Position
                                        </button>
                                        <div id="calculationResult" style="font-size:14px; color:#aaa; padding:10px; margin-top:10px;">
                                            Enter values to calculate
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div style="margin-bottom:20px">
                    <label style="display:block;margin-bottom:8px;font-size:14px;color:#aaa">Source</label>
                    <select id="positionSource">
                        <option value="LIVE">LIVE</option>
                        <option value="PAPER">PAPER</option>
                        <option value="SIMULATOR">SIMULATOR</option>
                    </select>
                </div>

                <button class="full-btn success" onclick="addPosition()">Add Position</button>
            </div>
        </div>
    </div>

    <!-- ===== ACTION MODAL ===== -->
    <div id="actionModal" class="modal" onclick="outsideCloseActionModal(event)">
        <div class="modal-box">
            <div class="modal-header">
                <h3 id="actionModalSymbolTitle">Position Actions</h3>
                <button onclick="closeActionModal()">&#x2716;</button>
            </div>

            <div class="tabs">
                <button class="active" onclick="switchActionTab(event,'modify')">Modify</button>
                <button onclick="switchActionTab(event,'exit')">Exit</button>
                <button onclick="switchActionTab(event,'existingCode')">Existing Code</button>
                <button onclick="switchActionTab(event,'settings')">Settings</button>
                <button onclick="switchActionTab(event,'partition')">Partition</button>
            </div>

            <div id="modify" class="tab-content active">
                <div style="margin-bottom:12px">
                    <label style="display:block;margin-bottom:8px;font-size:14px;color:#aaa">Stop Loss</label>
                    <input id="modifyStopLoss" type="number" placeholder="Stop Loss Price">
                </div>
                <div style="margin-bottom:12px">
                    <label style="display:block;margin-bottom:8px;font-size:14px;color:#aaa">Target</label>
                    <input id="modifyTarget" type="number" placeholder="Target Price">
                </div>
                <div style="margin-bottom:12px">
                    <label style="display:block;margin-bottom:8px;font-size:14px;color:#aaa">Trailing SL</label>
                    <input id="modifyTrailingSL" type="number" placeholder="Trailing SL Points">
                </div>
                <button class="full-btn success" onclick="modifyPosition()">Update Position</button>
            </div>

            <div id="exit" class="tab-content">
                <div style="margin-bottom:12px">
                    <label style="display:block;margin-bottom:8px;font-size:14px;color:#aaa">Quantity</label>
                    <input id="exitQty" type="number" placeholder="Quantity to Exit">
                </div>
                <div style="margin-bottom:12px">
                    <label style="display:block;margin-bottom:8px;font-size:14px;color:#aaa">Exit Price</label>
                    <input id="exitPrice" type="number" placeholder="Exit Price">
                </div>
                <div style="margin-bottom:12px">
                    <label style="display:block;margin-bottom:8px;font-size:14px;color:#aaa">Exit Reason</label>
                    <select id="exitReason">
                        <option value="target_hit">Target Hit</option>
                        <option value="stop_loss">Stop Loss Hit</option>
                        <option value="manual">Manual Exit</option>
                        <option value="trailing_sl">Trailing SL Hit</option>
                    </select>
                </div>
                <button class="full-btn danger" onclick="exitPosition()">Exit Position</button>
            </div>

            <div id="existingCode" class="tab-content">
                <div style="margin-bottom:12px">
                    <label style="display:block;margin-bottom:8px;font-size:14px;color:#aaa">Strategy Code</label>
                    <textarea id="strategyCode" placeholder="Enter your trading strategy code here..."></textarea>
                </div>
                <div style="margin-bottom:12px">
                    <label style="display:block;margin-bottom:8px;font-size:14px;color:#aaa">Current Code Preview</label>
                    <div class="code-display" id="currentCodeDisplay">
                        <div class="code-line">// Sample Trading Strategy</div>
                        <div class="code-line">if (rsi &lt; 30 &amp;&amp; macd_signal &gt; 0) {</div>
                        <div class="code-line">   entryPrice = currentPrice;</div>
                        <div class="code-line">   stopLoss = entryPrice * 0.98;</div>
                        <div class="code-line">   target = entryPrice * 1.02;</div>
                        <div class="code-line">}</div>
                    </div>
                </div>
                <div style="display:flex;gap:10px">
                    <button class="full-btn info" onclick="saveStrategyCode()">Save Code</button>
                    <button class="full-btn" onclick="testStrategyCode()" style="background:#ff9900">Test Code</button>
                </div>
            </div>

            <div id="settings" class="tab-content">
                <div style="margin-bottom:12px">
                    <label style="display:block;margin-bottom:8px;font-size:14px;color:#aaa">Alert Price</label>
                    <input id="alertPrice" type="number" placeholder="Alert Price">
                </div>
                <div style="margin-bottom:12px">
                    <label style="display:block;margin-bottom:8px;font-size:14px;color:#aaa">Auto Square Off Time</label>
                    <input id="autoSquareOff" type="time" value="15:15">
                </div>
                <div style="margin-bottom:12px">
                    <label style="display:block;margin-bottom:8px;font-size:14px;color:#aaa">Max Loss Amount</label>
                    <input id="maxLoss" type="number" placeholder="Maximum Loss Amount">
                </div>
                <button class="full-btn info" onclick="saveSettings()">Save Settings</button>
            </div>

            <div id="partition" class="tab-content">
                <div style="margin-bottom:12px">
                    <label style="display:block;margin-bottom:8px;font-size:14px;color:#aaa">Partition Square Off Qty</label>
                    <input id="actionPartitionSquareOffQty" type="number" placeholder="Quantity">
                </div>
                <div style="margin-bottom:12px">
                    <label style="display:block;margin-bottom:8px;font-size:14px;color:#aaa">Partition Square Off Price</label>
                    <input id="actionPartitionSquareOffPrice" type="number" placeholder="Price">
                </div>
                <div style="margin-bottom:12px">
                    <label style="display:block;margin-bottom:8px;font-size:14px;color:#aaa">Add Quantity</label>
                    <input id="actionAddQty" type="number" placeholder="Quantity">
                </div>
                <div style="margin-bottom:12px">
                    <label style="display:block;margin-bottom:8px;font-size:14px;color:#aaa">Add Qty Price</label>
                    <input id="actionAddQtyPrice" type="number" placeholder="Price">
                </div>
                <div style="margin-bottom:12px">
                    <label style="display:block;margin-bottom:8px;font-size:14px;color:#aaa">Partition Action</label>
                    <select id="partitionAction">
                        <option value="square_off">Square Off Partition</option>
                        <option value="add_qty">Add Quantity</option>
                        <option value="both">Both</option>
                    </select>
                </div>
                <button class="full-btn success" onclick="executePartitionAction()">Execute Partition</button>
            </div>
        </div>
    </div>

    <!-- ===== SCREENER POPUP MODAL ===== -->
    <div id="screenerPopupModal" class="modal" onclick="closeScreenerPopup(event)">
        <div class="modal-box" style="width: 600px;">
            <div class="modal-header">
                <h3><i class="fas fa-search"></i> Stock Screener</h3>
                <button onclick="closeScreenerPopup()">&#x2716;</button>
            </div>

            <div style="display: flex; gap: 10px; margin: 15px 0;">
                <button onclick="openChartink()" style="flex:1; padding:12px; background:#ff9900; border:none; color:#fff; border-radius:5px; cursor:pointer; font-weight:bold;">
                    <i class="fas fa-external-link-alt"></i> Open Chartink
                </button>
            </div>

            <div style="background: #333; padding: 15px; border-radius: 5px; margin: 15px 0;">
                <h4 style="color: var(--accent-color); margin-bottom: 10px;">
                    <i class="fas fa-sliders-h"></i> Indicator Based Screener
                </h4>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                    <select id="indicatorSelect" style="padding:8px; background:#444; color:#fff; border:none; border-radius:5px;">
                        <option>Select Indicator</option>
                        <option>RSI (Relative Strength Index)</option>
                        <option>MACD (Moving Average Convergence Divergence)</option>
                        <option>Bollinger Bands</option>
                        <option>Moving Averages</option>
                        <option>Stochastic Oscillator</option>
                    </select>
                    <input id="indicatorValue" type="number" placeholder="Value" style="padding:8px; background:#444; color:#fff; border:none; border-radius:5px;">
                </div>
                <button onclick="deployIndicatorScreener()" style="margin-top:10px; padding:8px 15px; background:#00aa66; border:none; color:#fff; border-radius:5px; cursor:pointer;">
                    <i class="fas fa-play"></i> Deploy Screener
                </button>
            </div>

            <div style="background: #333; padding: 15px; border-radius: 5px; margin: 15px 0;">
                <h4 style="color: var(--accent-color); margin-bottom: 10px;">
                    <i class="fas fa-save"></i> Saved Screeners
                </h4>
                <div id="savedScreenersList" style="margin-bottom:10px;">
                    <div style="padding:8px; background:#444; margin:5px 0; border-radius:3px; cursor:pointer;">
                        <i class="fas fa-chart-line"></i> RSI Oversold Strategy
                    </div>
                    <div style="padding:8px; background:#444; margin:5px 0; border-radius:3px; cursor:pointer;">
                        <i class="fas fa-chart-line"></i> MACD Crossover Strategy
                    </div>
                </div>
                <button onclick="deploySavedScreener()" style="margin-top:5px; padding:8px 15px; background:#0077ff; border:none; color:#fff; border-radius:5px; cursor:pointer;">
                    <i class="fas fa-play"></i> Deploy Saved Screener
                </button>
            </div>

            <div style="display: flex; gap: 10px; margin-top: 15px;">
                <button onclick="createNewScreener()" style="flex:1; padding:10px; background:#9d4edd; border:none; color:#fff; border-radius:5px; cursor:pointer;">
                    <i class="fas fa-plus"></i> Create New Screener
                </button>
            </div>
        </div>
    </div>

    <!-- ===== STRATEGY CREATION POPUP ===== -->
    <div id="strategyCreationPopup" class="modal" onclick="closeStrategyPopup(event)">
        <div class="modal-box" style="width: 600px;">
            <div class="modal-header">
                <h3><i class="fas fa-chess-board"></i> Strategy Creation</h3>
                <button onclick="closeStrategyPopup()">&#x2716;</button>
            </div>

            <div style="text-align: center; padding: 20px 0;">
                <h4 style="color: var(--accent-color); margin-bottom: 20px;">Select Strategy Platform</h4>

                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 15px;">
                    <button onclick="openOpstra()" style="padding:15px; background:linear-gradient(135deg, #0077ff, #0055cc); border:none; color:#fff; border-radius:10px; cursor:pointer;">
                        <i class="fas fa-chart-pie"></i><br>
                        <strong>Opstra</strong><br>
                        <small>Options Strategy</small>
                    </button>

                    <button onclick="openSensibull()" style="padding:15px; background:linear-gradient(135deg, #00aa66, #008800); border:none; color:#fff; border-radius:10px; cursor:pointer;">
                        <i class="fas fa-bullhorn"></i><br>
                        <strong>Sensibull</strong><br>
                        <small>Options Trading</small>
                    </button>
                </div>

                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                    <button onclick="openMarketPlace()" style="padding:15px; background:linear-gradient(135deg, #ff9900, #cc7700); border:none; color:#fff; border-radius:10px; cursor:pointer;">
                        <i class="fas fa-store"></i><br>
                        <strong>Market Place</strong><br>
                        <small>Strategy Marketplace</small>
                    </button>

                    <button onclick="openCreateStrategy()" style="padding:15px; background:linear-gradient(135deg, #9d4edd, #7b2cbf); border:none; color:#fff; border-radius:10px; cursor:pointer;">
                        <i class="fas fa-plus-circle"></i><br>
                        <strong>Create Strategy</strong><br>
                        <small>Custom Strategy Builder</small>
                    </button>
                </div>
            </div>

            <div style="background: #333; padding: 15px; border-radius: 5px; margin-top: 15px;">
                <h5 style="color: #aaa; margin-bottom: 10px;">Quick Actions:</h5>
                <div style="display: flex; gap: 10px;">
                    <button onclick="backtestStrategy()" style="flex:1; padding:8px; background:#0077ff; border:none; color:#fff; border-radius:5px; cursor:pointer;">
                        <i class="fas fa-history"></i> Backtest
                    </button>
                    <button onclick="optimizeStrategy()" style="flex:1; padding:8px; background:#00aa66; border:none; color:#fff; border-radius:5px; cursor:pointer;">
                        <i class="fas fa-cogs"></i> Optimize
                    </button>
                    <button onclick="shareStrategy()" style="flex:1; padding:8px; background:#9d4edd; border:none; color:#fff; border-radius:5px; cursor:pointer;">
                        <i class="fas fa-share"></i> Share
                    </button>
                </div>
            </div>
        </div>
    </div>


    <script src="/static/app.js"></script>
</body>
</html>
